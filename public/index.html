<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://kit.fontawesome.com/1b728dc560.css" crossorigin="anonymous">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="./bootstrap-5.2.2-dist/css/bootstrap.css">
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css"/>
    <title>Ecommerce Application</title>
</head>
<body>
</div>
  <div class="row row-cols-1 row-cols-lg-12 d-lg-flex d  justify-content-center">
  <div class="fw-lighter text-center fs-5">Ecommerce Application</div>

    <section class="playlist">
        <div class="row  row-cols-md-2 row-cols-lg-3 g-2 px-5" id="disp">
  
  </div>
</div>
</section>
<footer>
  <div class="px-5 col-lg-12 col-sm-12" >
    <h5 class="fw-lighter text-white" align="center"style="font-family: sans-serif;font-size: 30px;">Developed By Vicky Mayowa</h5>
  </div>
</footer>
    <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
        import {getDatabase,ref,set,onValue} from "https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js";
        import {getDownloadURL, ref as stRef,getStorage} from "https://www.gstatic.com/firebasejs/9.17.1/firebase-storage.js";
        const firebaseConfig = {
        apiKey: "AIzaSyB4DVUXdPIziaMaOrzrEtTjYZTkNOftaP4",
        authDomain: "level-two-exam.firebaseapp.com",
        databaseURL: "https://level-two-exam-default-rtdb.firebaseio.com",
        projectId: "level-two-exam",
        storageBucket: "level-two-exam.appspot.com",
        messagingSenderId: "1039911335556",
        appId: "1:1039911335556:web:958db314ab2a16e75fb4d1"
        };
        const app = initializeApp(firebaseConfig);
            const db = getDatabase();
            const storage = getStorage()
           
            let allProduct = []
        
            onValue(ref(db,"productStore"),(snapshot)=>{
              console.log(snapshot.val())
              allProduct = snapshot.val()
              allProduct.map((eachProduct)=>{
                let imageRef = stRef(storage,`productStore/${eachProduct.coverImageName}`)
                getDownloadURL(imageRef).then((url)=>{
                    console.log(url)
                })
                disp.innerHTML +=
                `
                <section class="product-list" id="list">
                    <div class="container text-center col-sm-12">
                      <div class="row  row-cols-md-2 row-cols-lg-3 g-2 px-5">
                        <div class="card mt-4 ms-5" style="width: 18rem;">
                        <img src='${url}' width='40' height='40' class="card-img-top" alt="...">
                        <div class="card-body">
                          <h5 class="card-title text-center">Product Name:<span>${eachProduct.title}</span></h5>
                          <h5 class="card-title text-center">Product Amount:<span>${eachProduct.artist}</span></h5>
                          <h5 class="card-title text-center">Prdocut Category:<span>${eachProduct.category}</span></h5>
                          <button class="btn btn-primary" onclick="edit()">Edit Product</button>
                          <button class="btn btn-danger" onclick="Delete()">Delete Product</button>
                        </div>
                    </div>  
                `

              })
              
            })
      </script>
</body>
</html>   